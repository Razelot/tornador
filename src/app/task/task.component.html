<div *ngIf="task$ | async as task" style="display: flex; flex-direction:column; height: 100%; overflow: auto; margin-top: -56px;">

  <div style="position: sticky; right: 0px; top: 0px; z-index: 2; width: 100%; ">
    <mat-toolbar style="background-color: transparent; color: white;">
      <mat-toolbar-row>

        <button mat-icon-button class="button-navigation" style="float: left; margin: 0px 5px;" (click)="onBackButtonClick()">
          <i class="material-icons">arrow_back</i>
        </button>

        <span style="flex: 1; text-overflow: clip; overflow: scroll;">
          <span *ngIf="activeTab > 0">{{ task.title }}</span>
        </span>
        
        <span style="margin: 0px 5px;">
          <button mat-icon-button [matMenuTriggerFor]="menu" class="button-navigation" style="float: right;">
            <mat-icon>more_vert</mat-icon>
          </button>
          <mat-menu #menu="matMenu" yPosition="below">
            <button mat-menu-item (click)="deleteTask()">
              <i class="material-icons">&#xE872;</i>
              <span>Delete</span>
            </button>
          </mat-menu>

          <button *ngIf="activeTab == 0" mat-icon-button class="button-navigation" style="float: right;" (click)="onSaveButtonClick(task)">
            <i class="material-icons">save</i>
          </button>

        </span>
      </mat-toolbar-row>
    </mat-toolbar>
  </div>

  <div style="display: block; flex: 1; height: calc(100% - 56px);">

    <mat-tab-group id="task" [(selectedIndex)]="activeTab" style="height: 100%;">
      <mat-tab>
        <ng-template mat-tab-label>
          <i class="material-icons">&#xE871;</i>
        </ng-template>
        <div *ngIf="activeTab === 0" style="padding: 24px;" (swipeleft)="onSwipe($event.type)" (swiperight)="onSwipe($event.type)">
          <app-task-overview [task$]="task"></app-task-overview>
        </div>
      </mat-tab>
      <mat-tab>
        <ng-template mat-tab-label>
          <i class="material-icons">&#xE0B7;</i>
        </ng-template>
        <div *ngIf="activeTab === 1" (swipeleft)="onSwipe($event.type)" (swiperight)="onSwipe($event.type)">
          <app-task-chat [taskID$]="taskID$"></app-task-chat>
        </div>
      </mat-tab>
      <mat-tab>
        <ng-template mat-tab-label>
          <i class="material-icons">&#xE226;</i>
        </ng-template>
        <div *ngIf="activeTab === 2" (swipeleft)="onSwipe($event.type)" (swiperight)="onSwipe($event.type)">
          <app-task-attachment [task$]="task" [taskID$]="taskID$"></app-task-attachment>
        </div>
      </mat-tab>
      <mat-tab>
        <ng-template mat-tab-label>
          <i class="material-icons">&#xE8B3;</i>
        </ng-template>
        <div *ngIf="activeTab === 3" (swipeleft)="onSwipe($event.type)" (swiperight)="onSwipe($event.type)">
          History
        </div>
      </mat-tab>
    </mat-tab-group>
  </div>

</div>